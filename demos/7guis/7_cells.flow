import material/material2tropic;


drawCell(cell : DynamicBehaviour<string>) -> Material {
	MBorder(0.0, 0.0, 1.0, 1.0,
		MClickable(
			MFrame(2.0, 0.0,
				[Fill(white)],
				MGroup([
					MFixed(128.0, 24.0),
					MSelect(cell, \c -> {
						MText(c, [])
					}),
				])
			),
			\ -> {
				next(cell, "A")
			}
		)
	)
}

makeHeading(s : string) -> Material {
	MFixSize(
		MBorder(2.0, 2.0, 0.0, 0.0,
			MText(s, [])
		), MFixed(64.0, 24.0)
	)
}

main() {
	cells : [[DynamicBehaviour<string>]]= generate(0, 26, \col -> {
		generate(0, 99, \row -> {
			make("")
		})
	});
	mrender(makeMaterialManager([]), true, 
		MScroll(	
			MCols(
				concat([
						MLines(
							generate(-1, 99, \row -> {
								makeHeading(if (row == -1) "" else i2s(row))
							})
						)
					],
					mapi(cells, \x, col -> {
						MLines(concat(
							[
								makeHeading(fromCharCode(65 + x)),
							],
							map(col, \cell -> {
								drawCell(cell)
							})
						))
					})
				)
			), MFillXY(),
			[]
		)
	);
}
